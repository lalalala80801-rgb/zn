<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
<title>智能交易所 · 曼谷 · 云同步（终极 v3.0 修复版）</title>

<!-- ✅ Twemoji：让所有国旗 Emoji 在任何设备都能显示 -->
<link rel="preconnect" href="https://twemoji.maxcdn.com">
<script defer src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>

<style>
:root{
  --bg:#0a0f1a; --panel:#0f172a; --panel2:#0b1324;
  --text:#e5e7eb; --muted:#9fb3c8; --buy:#ef4444; --sell:#3b82f6;
  --grid:#233146; --radius:16px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:radial-gradient(1200px 800px at 10% -10%,#0b1b30 10%,#0a0f1a 60%);
  color:var(--text);
  font-family:
    Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial,
    "PingFang SC", "Microsoft YaHei",
    "Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji",
    sans-serif;
}
.wrap{display:grid;grid-template-rows:auto 1fr auto;min-height:100%}
header{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;padding:10px 14px}
.logo{width:48px;height:48px;border-radius:14px;background:radial-gradient(circle at 30% 20%,#ffcc4d,#f09c00);
  display:flex;align-items:center;justify-content:center;color:#0a0f1a;font-weight:800;font-size:22px;}
.shopname .cn{font-size:20px;font-weight:800}
.shopname .en{font-size:12px;opacity:.85}
.controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.btn{background:#111827;color:#e5e7eb;border:1px solid #2b3648;border-radius:10px;padding:6px 10px;font-weight:600;cursor:pointer}
.clock .time{font-size:22px;font-weight:800}
.clock .date{font-size:12px;opacity:.85}

.board{background:linear-gradient(180deg,#0f172a,#0b1324);border:1px solid var(--grid);
  border-radius:var(--radius);margin:12px 14px;overflow:hidden;box-shadow:0 10px 28px rgba(0,0,0,.35)}
.thead,.row{display:grid;grid-template-columns:88px 1fr 220px 190px 190px;align-items:center}
.thead{background:linear-gradient(180deg,#0e1527,#0b1120);border-bottom:1px solid var(--grid)}
.cell{padding:10px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:22px}
.buy{color:var(--buy);font-weight:900}.sell{color:var(--sell);font-weight:900}.denom{font-weight:900;min-width:7ch;text-align:center}
.page-indicator{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);background:rgba(0,0,0,.25);
  border:1px solid #223049;border-radius:999px;padding:6px 10px;font-weight:800;pointer-events:none}
footer{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;padding:10px 14px;
  border-top:1px solid var(--grid);color:var(--muted)}
#loginFloat{position:fixed;right:16px;bottom:22px;z-index:1000;background:#0b1222d9;border:1px solid #2b3648;color:#e5e7eb;
  border-radius:999px;height:44px;padding:0 14px;display:none;gap:8px;justify-content:center;align-items:center;font-weight:700;
  box-shadow:0 8px 20px rgba(0,0,0,.35)}
#loginDlg{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:1200}
#loginPanel{background:#0b1222;border:1px solid #2b3648;border-radius:14px;width:min(420px,92vw);padding:16px}
.form-row{display:flex;gap:8px;align-items:center;margin:8px 0}
.form-row label{width:80px;color:#9fb3c8}
.form-row input{flex:1;background:#0b1222;color:#e5e7eb;border:1px solid #2b3648;border-radius:8px;padding:10px}
.form-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
@media (max-width:480px){
  .thead,.row{grid-template-columns:56px 1fr 120px 100px 100px}
  .cell{font-size:18px}
  .logo{width:36px;height:36px;font-size:18px}
}
</style>
</head>

<body>
<button id="loginFloat">🔐 登录</button>
<div class="wrap">
  <header>
    <div style="display:flex;align-items:center;gap:10px">
      <div class="logo">¥</div>
      <div class="shopname">
        <div class="cn">智能交易所 · 曼谷</div>
        <div class="en">Intelligent Exchange · Bangkok</div>
      </div>
    </div>
    <div class="controls" id="controls" style="display:none">
      <button class="btn" id="btn-cycle">▶️ 播放</button>
      <label class="btn">速度
        <input id="speed" type="range" min="0" max="60" step="1" value="6" style="width:120px">
        <input id="speedNum" type="number" min="0" max="120" step="1" value="6" style="width:54px;background:#0b1222;color:#e5e7eb;
          border:1px solid #2b3648;border-radius:8px;padding:6px">
        <span>秒</span>
      </label>
      <label class="btn">每页国家 <input id="rppNum" type="number" min="2" max="8" step="1" value="3"
        style="width:46px;background:#0b1222;color:#e5e7eb;border:1px solid #2b3648;border-radius:8px;padding:6px"></label>
      <button class="btn" id="btn-lock">🔒 已锁定</button>
      <button class="btn" id="btn-logout">退出</button>
      <span class="small" id="loginState"></span>
      <span class="small" id="cloudState">☁️ 云同步：开</span>
    </div>
    <div class="clock">
      <div class="time" id="time">--:--:--</div>
      <div class="date" id="date">—</div>
    </div>
  </header>

  <section class="board">
    <div class="thead">
      <div class="cell"></div>
      <div class="cell">Currency 货币 · สกุลเงิน</div>
      <div class="cell" style="text-align:center">Denomination 面额</div>
      <div class="cell" style="text-align:center;color:#ef4444;font-weight:900">BUY 买入</div>
      <div class="cell" style="text-align:center;color:#3b82f6;font-weight:900">SELL 卖出</div>
    </div>
    <div class="tb" style="position:relative">
      <div id="page"></div>
      <div class="page-indicator" id="pageIndicator">第 1 / 1 页</div>
    </div>
  </section>

  <footer>
    <div>快捷键：F 全屏 · Space 播放/暂停 · ←/→ 换页</div>
    <div>上次修改：<span id="updated">—</span></div>
    <div style="text-align:right">汇率仅供参考，成交以柜台报价为准。</div>
  </footer>
</div>

<!-- 登录弹窗 -->
<div id="loginDlg">
  <div id="loginPanel">
    <h3>员工登录</h3>
    <form id="loginForm" autocomplete="off">
      <div class="form-row"><label for="acc">账号</label>
        <input id="acc" name="acc_x" type="text" inputmode="latin" autocomplete="off" placeholder="例如 znjys"></div>
      <div class="form-row"><label for="pwd">密码</label>
        <input id="pwd" name="pwd_x" type="password" autocomplete="new-password" placeholder="例如 5201314"></div>
      <div class="form-actions">
        <button type="button" class="btn" id="btnCancel">取消</button>
        <button type="submit" class="btn">登录</button>
      </div>
    </form>
  </div>
</div>

<!-- ✅ Twemoji 渲染 -->
<script>
document.addEventListener("DOMContentLoaded",()=>{ if(window.twemoji) twemoji.parse(document.body,{folder:"svg",ext:".svg"}); });
</script>
</body>
</html>
